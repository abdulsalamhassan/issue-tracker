exports.id=521,exports.ids=[521],exports.modules={2505:(e,t,s)=>{Promise.resolve().then(s.bind(s,5312))},84:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,3724,23)),Promise.resolve().then(s.t.bind(s,5365,23)),Promise.resolve().then(s.t.bind(s,4900,23)),Promise.resolve().then(s.t.bind(s,4714,23)),Promise.resolve().then(s.t.bind(s,5392,23)),Promise.resolve().then(s.t.bind(s,8898,23))},5312:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>RootLayout});var r=s(784),i=s(9885);s(4047);var a=s(4070),n=s(9310);let o=new n.S({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:6e4}}});var l=s(7114),c=s(4944),u=s(1778),d=s(9576);let h=new Set(["/login","/register"]);function isPublicRoute(e){return h.has(e)}function useMeQuery(e=!0){return(0,u.a)({queryKey:["me"],queryFn:d.jo,enabled:e,staleTime:3e5})}function useAuthGuard(){let e=(0,l.usePathname)(),t=(0,l.useRouter)(),s=isPublicRoute(e),r=useMeQuery(!0);return(0,i.useEffect)(()=>{!s&&r.isError&&t.replace("/login")},[s,r.isError,t]),(0,i.useEffect)(()=>{s&&r.data?.user&&t.replace("/dashboard")},[s,r.data?.user,t]),{pathname:e,isPublic:s,isLoading:!s&&r.isLoading,user:r.data?.user,isAuthenticated:!!r.data?.user}}async function logoutUser(e){await (0,d.kS)(),e.clear()}function Navbar({user:e}){let t=(0,l.useRouter)(),s=(0,a.NL)(),i=(0,c.D)({mutationFn:()=>logoutUser(s),onSuccess:async()=>{t.push("/login")}});return r.jsx("header",{className:"h-14 border-b border-slate-200 bg-white",children:(0,r.jsxs)("div",{className:"mx-auto flex h-full w-full max-w-[1200px] items-center justify-between px-1",children:[r.jsx("div",{className:"flex items-center gap-3",children:r.jsx("span",{className:"text-sm font-medium text-slate-600",children:"DevTrack Workspace"})}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[r.jsx("span",{className:"rounded-md border border-blue-100 bg-blue-50 px-2.5 py-1 text-blue-700",children:e?.name??"User"}),r.jsx("button",{type:"button",className:"dt-btn-secondary px-3 py-1.5",onClick:()=>i.mutate(),disabled:i.isPending,children:i.isPending?"Logging out...":"Logout"})]})]})})}var p=s(7309),m=s(1440),x=s.n(m);let b=[{label:"Dashboard",href:"/dashboard"},{label:"Projects",href:"/projects"}];function isActive(e,t){return"/dashboard"===t?"/dashboard"===e:e.startsWith(t)}function Sidebar(){let e=(0,l.usePathname)(),t=e.split("/").filter(Boolean),s="projects"===t[0]&&!!t[1],i=s?t[1]:null,a=i?`/projects/${i}/issues`:"/projects";return(0,r.jsxs)("aside",{className:"hidden w-64 shrink-0 border-r border-slate-200 bg-white lg:flex lg:flex-col",children:[r.jsx("div",{className:"h-14 border-b border-slate-200 px-5",children:(0,r.jsxs)("div",{className:"flex h-full items-center gap-2",children:[r.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-sm bg-blue-600 text-[10px] font-semibold text-white",children:"IT"}),r.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"DevTrack"})]})}),(0,r.jsxs)("nav",{className:"px-3 py-5",children:[r.jsx("p",{className:"px-2 pb-2 text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:"Navigation"}),r.jsx("ul",{className:"space-y-1",children:b.map(t=>{let s=isActive(e,t.href);return r.jsx("li",{children:r.jsx(x(),{href:t.href,className:`block rounded-md px-3 py-2.5 text-sm ${s?"border-l-2 border-blue-600 bg-blue-50 font-medium text-blue-800 shadow-sm":"border-l-2 border-transparent text-slate-600 hover:bg-slate-100 hover:text-slate-900"}`,children:t.label})},t.label)})})]}),s&&(0,r.jsxs)("div",{className:"border-t border-slate-200 px-3 py-5",children:[r.jsx("p",{className:"px-2 pb-2 text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:"Current Project"}),(0,r.jsxs)("ul",{className:"space-y-1",children:[r.jsx("li",{children:r.jsx(x(),{href:a,className:`block rounded-md px-3 py-2.5 text-sm ${e.includes("/issues/")?"border-l-2 border-blue-600 bg-blue-50 font-medium text-blue-800 shadow-sm":"border-l-2 border-transparent text-slate-600 hover:bg-slate-100 hover:text-slate-900"}`,children:"Issue Board"})}),r.jsx("li",{children:(0,r.jsxs)("p",{className:"rounded-md px-3 py-2 font-mono text-xs text-slate-500",children:["ID: ",i]})})]})]})]})}function RootLayout({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:"min-h-screen bg-slate-50 text-slate-900",children:r.jsx(a.aH,{client:o,children:r.jsx(AppShell,{children:e})})})})}function AppShell({children:e}){let{isPublic:t,isLoading:s,user:i,isAuthenticated:a}=useAuthGuard();return t?r.jsx("main",{className:"min-h-screen bg-slate-100",children:e}):(0,r.jsxs)("div",{className:"flex min-h-screen bg-slate-100",children:[r.jsx(Sidebar,{}),(0,r.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[r.jsx(Navbar,{user:i}),r.jsx("main",{className:"px-6 py-6 lg:px-8",children:r.jsx("div",{className:"mx-auto w-full max-w-[1200px]",children:t||!s&&a?e:r.jsx(p.Z,{label:"Loading session..."})})})]})]})}},7309:(e,t,s)=>{"use strict";s.d(t,{Z:()=>LoadingState});var r=s(784);function LoadingState({label:e="Loading..."}){return r.jsx("div",{className:"dt-card p-5 text-sm text-slate-600",children:e})}},9576:(e,t,s)=>{"use strict";s.d(t,{$L:()=>createProject,$Q:()=>addProjectMember,EG:()=>getIssues,Ge:()=>getIssue,YW:()=>updateIssueStatus,e5:()=>getProject,gr:()=>assignIssue,jo:()=>getMe,kS:()=>logout,mW:()=>getProjects,v:()=>createIssue,x4:()=>login,z2:()=>register});let r=process.env.NEXT_PUBLIC_API_URL??"http://localhost:4000/api";function toErrorMessage(e,t){if(!e)return t||"Request failed";try{let t=JSON.parse(e);if(t.message)return t.message;if(t.error)return t.error;if(t.errors?.length&&t.errors[0]?.msg)return t.errors[0].msg}catch{}return e}async function apiFetch(e,t){let s=await fetch(`${r}${e}`,{credentials:"include",headers:{"Content-Type":"application/json",...t?.headers||{}},...t});if(!s.ok){let e=await s.text();throw Error(toErrorMessage(e,s.statusText))}if(204!==s.status)return await s.json()}function getMe(){return apiFetch("/auth/me")}function login(e){return apiFetch("/auth/login",{method:"POST",body:JSON.stringify(e)})}function register(e){return apiFetch("/auth/register",{method:"POST",body:JSON.stringify(e)})}function logout(){return apiFetch("/auth/logout",{method:"POST"})}function getProjects(){return apiFetch("/projects")}function createProject(e){return apiFetch("/projects",{method:"POST",body:JSON.stringify(e)})}function getProject(e){return apiFetch(`/projects/${e}`)}function addProjectMember(e,t){return apiFetch(`/projects/${e}/members`,{method:"POST",body:JSON.stringify({memberId:t})})}function getIssues(e,t){let s=new URLSearchParams;return t.status&&s.set("status",t.status),t.priority&&s.set("priority",t.priority),t.page&&s.set("page",String(t.page)),t.limit&&s.set("limit",String(t.limit)),apiFetch(`/projects/${e}/issues?${s.toString()}`)}function createIssue(e){return apiFetch(`/projects/${e.projectId}/issues`,{method:"POST",body:JSON.stringify({title:e.title,description:e.description,priority:e.priority})})}function updateIssueStatus(e,t){return apiFetch(`/issues/${e}/status`,{method:"PATCH",body:JSON.stringify({status:t})})}function assignIssue(e,t){return apiFetch(`/issues/${e}/assign`,{method:"PATCH",body:JSON.stringify({assigneeId:t})})}function getIssue(e){return apiFetch(`/issues/${e}`)}},5345:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>l});var r=s(5153);let i=(0,r.createProxy)(String.raw`C:\Users\cshii\OneDrive\Desktop\issue-tracker\frontend\app\layout.tsx`),{__esModule:a,$$typeof:n}=i,o=i.default,l=o},4047:()=>{}};