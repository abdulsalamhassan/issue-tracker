exports.id=521,exports.ids=[521],exports.modules={2505:(e,t,s)=>{Promise.resolve().then(s.bind(s,5312))},84:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,3724,23)),Promise.resolve().then(s.t.bind(s,5365,23)),Promise.resolve().then(s.t.bind(s,4900,23)),Promise.resolve().then(s.t.bind(s,4714,23)),Promise.resolve().then(s.t.bind(s,5392,23)),Promise.resolve().then(s.t.bind(s,8898,23))},5312:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>RootLayout});var r=s(784),a=s(9885);s(4047);var i=s(4070),n=s(9310);function shouldRetry(e,t){return(!t||"number"!=typeof t.status||!(t.status>=400)||!(t.status<500))&&e<2}function exponentialBackoff(e){return Math.min(2e3,300*Math.pow(2,e)+100*Math.random())}let o=new n.S({defaultOptions:{queries:{retry:shouldRetry,retryDelay:exponentialBackoff,refetchOnWindowFocus:!1,refetchOnReconnect:!1,staleTime:12e4}}});var l=s(7114),c=s(4944),u=s(1778),d=s(9576);let h=new Set(["/login","/register"]);function isPublicRoute(e){return h.has(e)}function useMeQuery(e=!0){return(0,u.a)({queryKey:["me"],queryFn:d.jo,enabled:e,initialData:void 0,staleTime:3e5,retry:!1,refetchOnWindowFocus:!1,refetchOnMount:!0})}function useAuthGuard(){let e=(0,l.usePathname)(),t=(0,l.useRouter)(),s=isPublicRoute(e),r=useMeQuery(!0);return(0,a.useEffect)(()=>{!s&&r.isError&&t.replace("/login")},[s,r.isError,t]),(0,a.useEffect)(()=>{s&&r.data?.user&&t.replace("/dashboard")},[s,r.data?.user,t]),{pathname:e,isPublic:s,isLoading:!s&&r.isLoading,user:r.data?.user,isAuthenticated:!!r.data?.user}}async function logoutUser(e){await (0,d.kS)();try{localStorage.removeItem("me")}catch{}e.clear()}function Navbar({user:e}){let t=(0,l.useRouter)(),s=(0,i.NL)(),a=(0,c.D)({mutationFn:()=>logoutUser(s),onSuccess:async()=>{t.push("/login")}});return r.jsx("header",{className:"h-14 border-b border-slate-200 bg-white/95 backdrop-blur",children:(0,r.jsxs)("div",{className:"mx-auto flex h-full w-full max-w-[1200px] items-center justify-between px-1",children:[r.jsx("div",{className:"flex items-center gap-3",children:r.jsx("span",{className:"text-sm font-semibold text-slate-700",children:"DevTrack Workspace"})}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[r.jsx("span",{className:"rounded-full border border-blue-200 bg-blue-50 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-blue-700",children:e?.name??"User"}),r.jsx("button",{type:"button",className:"dt-btn-secondary px-3 py-1.5",onClick:()=>a.mutate(),disabled:a.isPending,children:a.isPending?"Logging out...":"Logout"})]})]})})}var p=s(7309),m=s(1440),x=s.n(m);let b=[{label:"Dashboard",href:"/dashboard"},{label:"Projects",href:"/projects"}];function isActive(e,t){return"/dashboard"===t?"/dashboard"===e:e.startsWith(t)}function Sidebar(){let e=(0,l.usePathname)(),t=e.split("/").filter(Boolean),s="projects"===t[0]&&!!t[1],a=s?t[1]:null,i=a?`/projects/${a}/issues`:"/projects";return(0,r.jsxs)("aside",{className:"hidden w-64 shrink-0 border-r border-slate-200 bg-white lg:flex lg:flex-col",children:[r.jsx("div",{className:"h-14 border-b border-slate-200 px-5",children:(0,r.jsxs)("div",{className:"flex h-full items-center gap-2",children:[r.jsx("span",{className:"inline-flex h-6 w-6 items-center justify-center rounded-md bg-blue-600 text-[10px] font-bold text-white shadow-sm",children:"IT"}),r.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"DevTrack"})]})}),(0,r.jsxs)("nav",{className:"px-3 py-5",children:[r.jsx("p",{className:"px-2 pb-2 text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:"Navigation"}),r.jsx("ul",{className:"space-y-1",children:b.map(t=>{let s=isActive(e,t.href);return r.jsx("li",{children:r.jsx(x(),{href:t.href,className:`block rounded-md px-3 py-2.5 text-sm ${s?"border-l-2 border-blue-600 bg-blue-50 font-semibold text-blue-800 shadow-sm":"border-l-2 border-transparent text-slate-600 hover:bg-slate-100 hover:text-slate-900"}`,children:t.label})},t.label)})})]}),s&&(0,r.jsxs)("div",{className:"border-t border-slate-200 px-3 py-5",children:[r.jsx("p",{className:"px-2 pb-2 text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:"Current Project"}),(0,r.jsxs)("ul",{className:"space-y-1",children:[r.jsx("li",{children:r.jsx(x(),{href:i,className:`block rounded-md px-3 py-2.5 text-sm ${e.includes("/issues/")?"border-l-2 border-blue-600 bg-blue-50 font-semibold text-blue-800 shadow-sm":"border-l-2 border-transparent text-slate-600 hover:bg-slate-100 hover:text-slate-900"}`,children:"Issue Board"})}),r.jsx("li",{children:(0,r.jsxs)("p",{className:"rounded-md px-3 py-2 font-mono text-xs text-slate-500",children:["ID: ",a]})})]})]})]})}function RootLayout({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:"min-h-screen bg-slate-50 text-slate-900",children:r.jsx(i.aH,{client:o,children:r.jsx(AppShell,{children:e})})})})}function AppShell({children:e}){let{isPublic:t,isLoading:s,user:a,isAuthenticated:i}=useAuthGuard();return t?r.jsx("main",{className:"min-h-screen bg-slate-100",children:e}):t||!s&&i?(0,r.jsxs)("div",{className:"flex min-h-screen bg-slate-100",children:[r.jsx(Sidebar,{}),(0,r.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[r.jsx(Navbar,{user:a}),r.jsx("main",{className:"px-6 py-6 lg:px-8",children:r.jsx("div",{className:"mx-auto w-full max-w-[1200px]",children:e})})]})]}):r.jsx(p.Z,{label:"Checking session...",fullScreen:!0})}},7309:(e,t,s)=>{"use strict";s.d(t,{Z:()=>LoadingState});var r=s(784);function LoadingState({label:e="Loading...",fullScreen:t=!1}){let s=(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"inline-flex h-5 w-5 animate-spin rounded-full border-2 border-blue-200 border-t-blue-600","aria-hidden":"true"}),r.jsx("span",{children:e})]});return t?r.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-100 px-6",children:r.jsx("div",{className:"dt-card w-full max-w-sm p-6 text-sm text-slate-600",children:s})}):r.jsx("div",{className:"dt-card p-5 text-sm text-slate-600",children:s})}},9576:(e,t,s)=>{"use strict";s.d(t,{$L:()=>createProject,$Q:()=>addProjectMember,EG:()=>getIssues,Ge:()=>getIssue,TN:()=>getDashboardMetrics,YW:()=>updateIssueStatus,e5:()=>getProject,gr:()=>assignIssue,jo:()=>getMe,kS:()=>logout,mW:()=>getProjects,v:()=>createIssue,x4:()=>login,z2:()=>register});let r=process.env.NEXT_PUBLIC_API_URL??"http://localhost:4000/api";let ApiRequestError=class ApiRequestError extends Error{constructor(e,t){super(e),this.name="ApiRequestError",this.status=t}};function toErrorMessage(e,t){if(!e)return t||"Request failed";try{let t=JSON.parse(e);if(t.message)return t.message;if(t.error)return t.error;if(t.errors?.length&&t.errors[0]?.msg)return t.errors[0].msg}catch{}return e}async function apiFetch(e,t){let s;let a=new AbortController,i=setTimeout(()=>a.abort(),1e4);t?.signal&&(t.signal.aborted?a.abort():t.signal.addEventListener("abort",()=>a.abort(),{once:!0}));try{s=await fetch(`${r}${e}`,{credentials:"include",headers:{"Content-Type":"application/json",...t?.headers||{}},...t,signal:a.signal})}catch(e){if(e instanceof Error&&"AbortError"===e.name)throw new ApiRequestError("Request timed out. Please try again.");throw new ApiRequestError("Network error. Please check your connection and try again.")}finally{clearTimeout(i)}if(!s.ok){let e=await s.text();throw new ApiRequestError(toErrorMessage(e,s.statusText),s.status)}if(204!==s.status)return await s.json()}function getMe(){return apiFetch("/auth/me")}function login(e){return apiFetch("/auth/login",{method:"POST",body:JSON.stringify(e)})}function register(e){return apiFetch("/auth/register",{method:"POST",body:JSON.stringify(e)})}function logout(){return apiFetch("/auth/logout",{method:"POST"})}function getProjects(){return apiFetch("/projects")}function getDashboardMetrics(){return apiFetch("/projects/metrics")}function createProject(e){return apiFetch("/projects",{method:"POST",body:JSON.stringify(e)})}function getProject(e){return apiFetch(`/projects/${e}`)}function addProjectMember(e,t){return apiFetch(`/projects/${e}/members`,{method:"POST",body:JSON.stringify({memberId:t})})}function getIssues(e,t){let s=new URLSearchParams;return t.status&&s.set("status",t.status),t.priority&&s.set("priority",t.priority),t.page&&s.set("page",String(t.page)),t.limit&&s.set("limit",String(t.limit)),apiFetch(`/projects/${e}/issues?${s.toString()}`)}function createIssue(e){return apiFetch(`/projects/${e.projectId}/issues`,{method:"POST",body:JSON.stringify({title:e.title,description:e.description,priority:e.priority})})}function updateIssueStatus(e,t){return apiFetch(`/issues/${e}/status`,{method:"PATCH",body:JSON.stringify({status:t})})}function assignIssue(e,t){return apiFetch(`/issues/${e}/assign`,{method:"PATCH",body:JSON.stringify({assigneeId:t})})}function getIssue(e){return apiFetch(`/issues/${e}`)}},5345:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>l});var r=s(5153);let a=(0,r.createProxy)(String.raw`C:\Users\cshii\OneDrive\Desktop\issue-tracker\frontend\app\layout.tsx`),{__esModule:i,$$typeof:n}=a,o=a.default,l=o},4047:()=>{}};