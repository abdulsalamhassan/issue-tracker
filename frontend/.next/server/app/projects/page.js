(()=>{var e={};e.id=895,e.ids=[895],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},141:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>o,routeModule:()=>x,tree:()=>c});var a=t(7096),r=t(6132),n=t(7284),i=t.n(n),l=t(2564),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(s,d);let c=["",{children:["projects",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8728)),"C:\\Users\\cshii\\OneDrive\\Desktop\\issue-tracker\\frontend\\app\\projects\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,4998))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,5345)),"C:\\Users\\cshii\\OneDrive\\Desktop\\issue-tracker\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,4998))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["C:\\Users\\cshii\\OneDrive\\Desktop\\issue-tracker\\frontend\\app\\projects\\page.tsx"],p="/projects/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/projects/page",pathname:"/projects",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6716:(e,s,t)=>{Promise.resolve().then(t.bind(t,6269))},6269:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>ProjectsPage});var a=t(784),r=t(1440),n=t.n(r),i=t(9885),l=t(4070),d=t(1778),c=t(4944),o=t(9576);function ProjectCard({project:e}){return(0,a.jsxs)("div",{className:"rounded-md border border-slate-200 bg-white p-5 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:e.name}),a.jsx("p",{className:"text-sm text-slate-600",children:e.description||"No description provided."})]}),a.jsx("span",{className:"rounded-md bg-slate-100 px-2 py-1 text-xs font-medium text-slate-700",children:e.key})]}),a.jsx("div",{className:"mt-4",children:a.jsx(n(),{href:`/projects/${e.id}/issues`,className:"inline-flex rounded-md bg-blue-600 px-3 py-2 text-sm font-medium text-white hover:bg-blue-700",children:"View Issues"})})]})}var p=t(7309),m=t(6573);function ProjectsPage(){let e=(0,l.NL)(),[s,t]=(0,i.useState)(!1),[r,x]=(0,i.useState)(""),[u,j]=(0,i.useState)(""),[h,g]=(0,i.useState)(""),[y,N]=(0,i.useState)(""),[b,v]=(0,i.useState)(null),[f,P]=(0,i.useState)(""),[w,_]=(0,i.useState)(null),[C,k]=(0,i.useState)(null),q=(0,d.a)({queryKey:["projects"],queryFn:o.mW}),S=(0,c.D)({mutationFn:o.$L,onSuccess:async()=>{t(!1),x(""),j(""),g(""),_(null),await e.invalidateQueries({queryKey:["projects"]})},onError:e=>_(e.message)}),D=(0,c.D)({mutationFn:({projectId:e,userId:s})=>(0,o.$Q)(e,s),onSuccess:async()=>{v(null),P(""),k(null),await e.invalidateQueries({queryKey:["projects"]})},onError:e=>k(e.message)}),A=(0,i.useMemo)(()=>{if(!q.data?.projects)return[];let e=y.trim().toLowerCase();return e?q.data.projects.filter(s=>s.name.toLowerCase().includes(e)||s.key.toLowerCase().includes(e)||(s.description||"").toLowerCase().includes(e)):q.data.projects},[q.data?.projects,y]),L=A.find(e=>e.id===b)||null;return(0,a.jsxs)("div",{className:"dt-page",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"dt-title",children:"Your Projects"}),a.jsx("button",{type:"button",onClick:()=>t(e=>!e),className:"dt-btn-primary",children:s?"Cancel":"New Project"})]}),s&&(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),_(null),S.mutate({name:r,key:u.trim().toUpperCase(),description:h||void 0})},className:"dt-card space-y-4 p-5",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Project Name"}),a.jsx("input",{value:r,onChange:e=>x(e.target.value),className:"dt-input",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Project Key"}),a.jsx("input",{value:u,onChange:e=>j(e.target.value),className:"dt-input",required:!0})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Description"}),a.jsx("textarea",{value:h,onChange:e=>g(e.target.value),className:"dt-input",rows:3})]}),w&&a.jsx(m.Z,{message:w}),a.jsx("button",{type:"submit",className:"dt-btn-primary",disabled:S.isPending,children:S.isPending?"Creating...":"Create Project"})]}),q.isLoading&&a.jsx(p.Z,{label:"Loading projects..."}),q.isError&&a.jsx(m.Z,{message:q.error.message}),q.isSuccess&&(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("div",{className:"dt-panel flex items-center gap-3",children:a.jsx("input",{value:y,onChange:e=>N(e.target.value),placeholder:"Search projects...",className:"dt-input"})}),0===A.length?a.jsx(p.Z,{label:"No projects found."}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"dt-card hidden overflow-hidden lg:block",children:(0,a.jsxs)("table",{className:"dt-table",children:[a.jsx("thead",{className:"dt-thead",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-4 py-3",children:"Project Name"}),a.jsx("th",{className:"px-4 py-3",children:"Role"}),a.jsx("th",{className:"px-4 py-3",children:"Project Key"}),a.jsx("th",{className:"px-4 py-3",children:"Members"}),a.jsx("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),a.jsx("tbody",{children:A.map(e=>(0,a.jsxs)("tr",{className:"dt-row",children:[(0,a.jsxs)("td",{className:"px-4 py-4",children:[a.jsx("p",{className:"font-medium text-slate-900",children:e.name}),a.jsx("p",{className:"text-xs text-slate-500",children:e.description||"No description provided."})]}),a.jsx("td",{className:"px-4 py-4",children:a.jsx("span",{className:"rounded-md bg-blue-50 px-2 py-1 text-xs text-blue-700",children:"Admin"})}),a.jsx("td",{className:"px-4 py-4 text-slate-600",children:e.key}),a.jsx("td",{className:"px-4 py-4 text-slate-600",children:e.members?.length??0}),a.jsx("td",{className:"px-4 py-4 text-right",children:(0,a.jsxs)("div",{className:"inline-flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>{v(e.id),k(null)},className:"dt-btn-ghost",children:"Add Member"}),a.jsx(n(),{href:`/projects/${e.id}/issues`,className:"dt-btn-primary inline-flex px-3 py-2 text-xs",children:"View Issues"})]})})]},e.id))})]})}),b&&(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),b&&(k(null),D.mutate({projectId:b,userId:f}))},className:"dt-card space-y-3 p-4",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-slate-800",children:["Add member to ",L?`"${L.name}"`:"selected project"]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Paste a valid MongoDB user ObjectId. Only project owner can add members."}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row",children:[a.jsx("input",{value:f,onChange:e=>P(e.target.value),placeholder:"User ObjectId",className:"dt-input",required:!0}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"submit",className:"dt-btn-primary px-3 py-2",disabled:D.isPending,children:D.isPending?"Adding...":"Add"}),a.jsx("button",{type:"button",onClick:()=>{v(null),P(""),k(null)},className:"dt-btn-secondary px-3 py-2",children:"Cancel"})]})]}),C&&a.jsx(m.Z,{message:C})]}),a.jsx("div",{className:"grid gap-4 lg:hidden",children:A.map(e=>a.jsx(ProjectCard,{project:e},e.id))})]})]})]})}},8728:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>n,default:()=>d});var a=t(5153);let r=(0,a.createProxy)(String.raw`C:\Users\cshii\OneDrive\Desktop\issue-tracker\frontend\app\projects\page.tsx`),{__esModule:n,$$typeof:i}=r,l=r.default,d=l}};var s=require("../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[425,323,521,248],()=>__webpack_exec__(141));module.exports=t})();